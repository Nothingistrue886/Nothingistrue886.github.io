<footer class="container">
    <div class="site-footer" role="contentinfo">
        <div class="copyright left mobile-block">
            © 2019
            <span title="{{ site.author }}">{{ site.author }}</span>
            <a href="javascript:window.scrollTo(0,0)" class="right mobile-visible">TOP</a>
        </div>

        <ul class="site-footer-links right mobile-hidden">
            <li>
                <a href="javascript:window.scrollTo(0,0)">TOP</a>
            </li>
        </ul>
        <a href="{{ site.github.repository_url }}" target="_blank" aria-label="view source code">
            <span class="mega-octicon octicon-mark-github" title="GitHub"></span>
        </a>
        <ul class="site-footer-links mobile-hidden">
            {% for nav in site.navs %}
            <li>
                <a href="{{ site.url }}{{ nav.href }}" title="{{ nav.label }}" target="{{ nav.target | default: _self }}">
                    {{ nav.label }}
                </a>
            </li>
            {% endfor %}
            <li>
                <a href="{{ site.url }}{{ site.subscribe_rss }}">
                    <span class="octicon octicon-rss" style="color:orange;"></span>
                </a>
            </li>
        </ul>
        <div class="left mobile-block">
            <span id="busuanzi_container_site_pv">
                访问量&nbsp;<span id="busuanzi_value_site_pv"></span>
            </span>
            <span id="busuanzi_container_site_uv">
                访客数&nbsp;<span id="busuanzi_value_site_uv"></span>
            </span>
            <span id="busuanzi_container_page_pv">
                阅读量&nbsp;<span id="busuanzi_value_page_pv"></span>
            </span>
        </div>
    </div>
</footer>
<div class="tools-wrapper">
    <a class="gotop" href="#" title="回到顶部">
        <span class="octicon octicon-arrow-up"></span>
    </a>
</div>
<!-- / footer -->
<script src="{{ site.url }}/assets/vendor/share.js/dist/js/share.min.js"></script>
<script src="{{ site.url }}/assets/js/geopattern.js"></script>
<script src="{{ site.url }}/assets/js/prism.js"></script>
<script src="{{ site.url }}/assets/js/jquery.fancybox.pack.js" type="text/javascript"></script>
<script async src="https://busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script>
<script>
    jQuery(document).ready(function ($) {
        // geopattern
        $('.geopattern').each(function () {
            $(this).geopattern($(this).data('pattern-id'));
        });
        // hljs.initHighlightingOnLoad();
        // 给图片添加链接
        $("body").find("img").each(function () {
            var strA = "<a class='fancybox' title='" + this.alt + "' href='" + this.src +"'></a>";
            $(this).wrapAll(strA);
        });
    });
    // fancybox
    $(".fancybox").fancybox({
        'openEffect': 'elastic',
        'closeEffect': 'elastic',
        'titleShow': false,
        'padding': 0
    });
</script>

{% if page.mermaid %}
<script src="{{ site.url }}/assets/js/mermaid.min.js"></script>
<script>mermaid.initialize({startOnLoad: true});</script>
{% endif %}

{% if page.sequence %}
<script src="{{ site.url }}/assets/js/webfont.js"></script>
<script src="{{ site.url }}/assets/js/snap.svg-min.js"></script>
<script src="{{ site.url }}/assets/js/underscore-min.js"></script>
<script src="{{ site.url }}/assets/vendor/js-sequence-diagrams/dist/sequence-diagram-min.js"></script>
<script>
    $(".language-sequence").sequenceDiagram({theme: 'simple'});
</script>
{% endif %}

{% if page.flow %}
<script src="{{ site.url }}/assets/js/raphael.min.js"></script>
<script src="{{ site.url }}/assets/vendor/flowchart.js/dist/flowchart.min.js"></script>
<script src="{{ site.url }}/assets/js/flow.js"></script>
{% endif %}

{% if page.mathjax %}
<script type="text/javascript"
        src="https://basis-learning.github.io/MathJax/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
{% endif %}

{% if site.google.analytics_id %}
<div style="display:none">
    <script>
        (function (i, s, o, g, r, a, m) {
            i['GoogleAnalyticsObject'] = r;
            i[r] = i[r] || function () {
                (i[r].q = i[r].q || []).push(arguments)
            }, i[r].l = 1 * new Date();
            a = s.createElement(o),
                m = s.getElementsByTagName(o)[0];
            a.async = 1;
            a.src = g;
            m.parentNode.insertBefore(a, m)
        })(window, document, 'script', 'https://www.google-analytics.com/analytics.js', 'ga');
        ga('create', '{{ site.google.analytics_id }}', 'auto');
        ga('send', 'pageview');
    </script>
</div>
{% endif %}
{% if site.baidu.analytics_id %}
<div style="display:none">
    <script>
        var _hmt = _hmt || [];
        (function () {
            var hm = document.createElement("script");
            hm.src = "https://hm.baidu.com/hm.js?{{site.baidu.analytics_id}}";
            var s = document.getElementsByTagName("script")[0];
            s.parentNode.insertBefore(hm, s);
        })();
    </script>
</div>
{% endif %}
<script>
    // 首页打开sw
    if("/" == '{{page.url}}'){
        // 检测浏览器是否支持SW
        if(navigator.serviceWorker != null){
            navigator.serviceWorker.register('/service-worker.js')
                .then(function(registartion){
                    console.log('支持sw:',registartion.scope)
                })
        } else {
            console.log('不支持sw')
        }
    }
</script>
</body>
</html>
